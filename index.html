<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=no">
    <title>Catch My Kisses for Drishti üíã</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: 
                linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)),
                url('./assets/images/background.jpg') center/cover fixed,
                linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            color: white;
            position: relative;
            height: 100vh;
            width: 100vw;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        
        .game-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            padding: 15px;
            text-align: center;
            z-index: 100;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            -webkit-backface-visibility: hidden;
        }
        
        .game-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.2rem, 4vw, 2rem);
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            margin-bottom: 8px;
        }
        
        .game-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 350px;
            margin: 0 auto;
        }
        
        .stat {
            font-size: clamp(0.8rem, 2.2vw, 1rem);
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        }
        
        .score { color: #4ecdc4; }
        .lives { color: #ff6b6b; }
        .level { color: #f9ca24; }
        
        /* Boyfriend image at top - FIXED for mobile */
        .boyfriend-sender {
            position: absolute;
            top: 90px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            z-index: 90;
            border-radius: 50%;
            border: 3px solid #ff6b6b;
            box-shadow: 0 10px 25px rgba(255,107,107,0.4);
            animation: gentle-float 3s ease-in-out infinite;
            -webkit-backface-visibility: hidden;
        }
        
        .boyfriend-sender img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            display: block;
        }
        
        @keyframes gentle-float {
            0%, 100% { transform: translateX(-50%) translateY(0px); }
            50% { transform: translateX(-50%) translateY(-8px); }
        }
        
        /* Love message */
        .love-message {
            position: absolute;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,107,107,0.9);
            backdrop-filter: blur(10px);
            padding: 8px 15px;
            border-radius: 20px;
            font-family: 'Dancing Script', cursive;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            z-index: 89;
            animation: message-pulse 4s ease-in-out infinite;
            -webkit-backface-visibility: hidden;
        }
        
        @keyframes message-pulse {
            0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.02); }
        }
        
        /* Drishti as the player - MOBILE OPTIMIZED */
        .player {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            cursor: pointer;
            z-index: 50;
            border-radius: 50%;
            border: 3px solid #4ecdc4;
            box-shadow: 0 10px 25px rgba(78,205,196,0.4);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            touch-action: manipulation;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            transition: transform 0.1s ease-out;
        }
        
        .player img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            display: block;
            pointer-events: none;
        }
        
        .player.moving {
            box-shadow: 0 15px 35px rgba(78,205,196,0.6);
            transform: translateX(-50%) scale(1.05);
        }
        
        /* Catching effect */
        .catch-effect {
            position: absolute;
            width: 110px;
            height: 110px;
            border: 3px solid #4ecdc4;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            animation: catch-ring 0.5s ease-out;
            pointer-events: none;
        }
        
        @keyframes catch-ring {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(0.8); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.4); }
        }
        
        .falling-item {
            position: absolute;
            font-size: 32px;
            animation: fall linear;
            cursor: pointer;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            z-index: 40;
            touch-action: manipulation;
        }
        
        @keyframes fall {
            from { top: -50px; }
            to { top: 100vh; }
        }
        
        .kiss { color: #ff6b6b; }
        .heart { color: #e74c3c; }
        .special-kiss {
            color: #f39c12;
            font-size: 40px;
            animation: fall linear, special-glow 2s ease-in-out infinite;
        }
        
        @keyframes special-glow {
            0%, 100% { filter: brightness(1) drop-shadow(0 0 5px #f39c12); }
            50% { filter: brightness(1.3) drop-shadow(0 0 12px #f39c12); }
        }
        
        .bomb { color: #2c3e50; }
        
        .particle {
            position: absolute;
            pointer-events: none;
            animation: particle-explosion 0.8s ease-out forwards;
            font-size: 18px;
            z-index: 60;
        }
        
        @keyframes particle-explosion {
            0% { opacity: 1; transform: scale(1) translate(0, 0); }
            100% { opacity: 0; transform: scale(0.3) translate(var(--dx), var(--dy)); }
        }
        
        .game-over-screen, .start-screen {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(15px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 200;
            padding: 20px;
        }
        
        .screen-title {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(1.8rem, 6vw, 3rem);
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
        }
        
        .screen-message {
            font-size: clamp(0.9rem, 2.8vw, 1.2rem);
            margin-bottom: 25px;
            max-width: 450px;
            line-height: 1.6;
        }
        
        .game-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            padding: 12px 25px;
            border-radius: 40px;
            color: white;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px;
            touch-action: manipulation;
            min-width: 180px;
        }
        
        .game-button:hover, .game-button:active {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255,107,107,0.5);
        }
        
        .game-button.secondary {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }
        
        .instructions {
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 25px;
            max-width: 350px;
        }
        
        .instruction-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: clamp(0.8rem, 2.2vw, 0.95rem);
        }
        
        .instruction-icon {
            font-size: 22px;
            margin-right: 8px;
        }
        
        /* Mobile specific improvements */
        @media (max-width: 768px) {
            .game-header { padding: 10px; }
            .boyfriend-sender { width: 70px; height: 70px; top: 80px; }
            .love-message { top: 160px; font-size: 0.9rem; }
            .player { width: 70px; height: 70px; bottom: 25px; }
            .falling-item { font-size: 28px; }
            .special-kiss { font-size: 35px; }
        }
        
        @media (max-width: 480px) {
            .boyfriend-sender { width: 60px; height: 60px; }
            .player { width: 60px; height: 60px; }
        }
    </style>
</head>
<body>
    <!-- Background Music -->
    <audio id="backgroundMusic" loop preload="auto">
        <source src="./assets/audio/game-background.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Sound Effects -->
    <audio id="kissSound" preload="auto">
        <source src="./assets/audio/kiss-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="heartSound" preload="auto">
        <source src="./assets/audio/heart-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="specialSound" preload="auto">
        <source src="./assets/audio/special-sound.mp3" type="audio/mpeg">
    </audio>
    <audio id="bombSound" preload="auto">
        <source src="./assets/audio/bomb-sound.mp3" type="audio/mpeg">
    </audio>

    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <h1 class="screen-title" style="color: #ff6b6b;">Catch My Kisses, Drishti! üíã</h1>
        <p class="screen-message">
            I'm sending you all my love from the top of the screen! 
            Move around and catch all my kisses and hearts! üíï<br><br>
            <small>üéµ Romantic music will automatically start when you play!</small>
        </p>
        
        <div class="instructions">
            <div class="instruction-item">
                <span class="instruction-icon">üíã</span>
                <span>My kisses: +10 points</span>
            </div>
            <div class="instruction-item">
                <span class="instruction-icon">‚ù§Ô∏è</span>
                <span>My hearts: +5 points</span>
            </div>
            <div class="instruction-item">
                <span class="instruction-icon">‚ú®</span>
                <span>Special golden kiss: +25 points</span>
            </div>
            <div class="instruction-item">
                <span class="instruction-icon">‚õàÔ∏è</span>
                <span>Storm clouds: -1 life</span>
            </div>
        </div>
        
        <button class="game-button" onclick="startGame()">Start Catching My Love üíï</button>
        <button class="game-button secondary" onclick="goBack()">Back to Main Site</button>
    </div>
    
    <!-- Game Over Screen -->
    <div class="game-over-screen" id="gameOverScreen" style="display: none;">
        <h1 class="screen-title" style="color: #4ecdc4;">You Did Amazing! üíñ</h1>
        <p class="screen-message" id="finalMessage"></p>
        <button class="game-button" onclick="restartGame()">Catch More Kisses üíã</button>
        <button class="game-button secondary" onclick="goBack()">Back to Main Site</button>
    </div>
    
    <!-- Game Container -->
    <div class="game-container" id="gameContainer">
        <div class="game-header">
            <h1 class="game-title">Sending Love to My Beautiful Drishti üíã</h1>
            <div class="game-stats">
                <div class="stat score">Love Score: <span id="score">0</span></div>
                <div class="stat lives">Lives: <span id="lives">3</span></div>
                <div class="stat level">Level: <span id="level">1</span></div>
            </div>
        </div>
        
        <div class="boyfriend-sender">
            <img src="./assets/images/boyfriend.png" alt="Sending kisses">
        </div>
        
        <div class="love-message">
            Sending all my kisses to you! üòò
        </div>
        
        <div class="player" id="player">
            <img src="./assets/images/drishti.png" alt="Drishti">
        </div>
    </div>

    <script>
        let gameActive = false;
        let score = 0;
        let lives = 3;
        let level = 1;
        let gameSpeed = 3000;
        let spawnInterval;
        let playerPosition = 50;
        let isMoving = false;
        
        const player = document.getElementById('player');
        const gameContainer = document.getElementById('gameContainer');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        
        const backgroundMusic = document.getElementById('backgroundMusic');
        const sounds = {
            kiss: document.getElementById('kissSound'),
            heart: document.getElementById('heartSound'),
            special: document.getElementById('specialSound'),
            bomb: document.getElementById('bombSound')
        };
        
        // Set volumes
        backgroundMusic.volume = 0.2;
        Object.values(sounds).forEach(sound => {
            sound.volume = 0.7;
        });
        
        const gameItems = [
            { emoji: 'üíã', type: 'kiss', points: 10, probability: 0.4, sound: 'kiss' },
            { emoji: '‚ù§Ô∏è', type: 'heart', points: 5, probability: 0.3, sound: 'heart' },
            { emoji: 'üíï', type: 'heart', points: 5, probability: 0.15, sound: 'heart' },
            { emoji: '‚ú®', type: 'special', points: 25, probability: 0.1, sound: 'special' },
            { emoji: '‚õàÔ∏è', type: 'bomb', points: -1, probability: 0.05, sound: 'bomb' }
        ];
        
        function playSound(soundType) {
            const sound = sounds[soundType];
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log('Sound failed:', e));
            }
        }
        
        function updatePlayerPosition(clientX) {
            const containerRect = gameContainer.getBoundingClientRect();
            const newPosition = ((clientX - containerRect.left) / containerRect.width) * 100;
            playerPosition = Math.max(8, Math.min(92, newPosition));
            player.style.left = playerPosition + '%';
            
            // Add moving class for visual feedback
            if (!isMoving) {
                isMoving = true;
                player.classList.add('moving');
                setTimeout(() => {
                    isMoving = false;
                    player.classList.remove('moving');
                }, 150);
            }
        }
        
        // Enhanced mobile touch controls
        let touchStartX = 0;
        let isDragging = false;
        
        // Touch events for mobile
        gameContainer.addEventListener('touchstart', (e) => {
            if (!gameActive) return;
            e.preventDefault();
            isDragging = true;
            touchStartX = e.touches[0].clientX;
            updatePlayerPosition(e.touches[0].clientX);
        }, { passive: false });
        
        gameContainer.addEventListener('touchmove', (e) => {
            if (!gameActive || !isDragging) return;
            e.preventDefault();
            updatePlayerPosition(e.touches[0].clientX);
        }, { passive: false });
        
        gameContainer.addEventListener('touchend', (e) => {
            isDragging = false;
        });
        
        // Mouse events for desktop
        gameContainer.addEventListener('mousemove', (e) => {
            if (gameActive && !isDragging) {
                updatePlayerPosition(e.clientX);
            }
        });
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (!gameActive) return;
            if (e.key === 'ArrowLeft' || e.key === 'a') {
                playerPosition = Math.max(8, playerPosition - 8);
                player.style.left = playerPosition + '%';
            } else if (e.key === 'ArrowRight' || e.key === 'd') {
                playerPosition = Math.min(92, playerPosition + 8);
                player.style.left = playerPosition + '%';
            }
        });
        
        function requestFullscreen() {
    const elem = document.documentElement; // Full page
    
    if (elem.requestFullscreen) {
        elem.requestFullscreen().catch(e => console.log('Fullscreen failed:', e));
    } else if (elem.webkitRequestFullscreen) { // Safari
        elem.webkitRequestFullscreen();
    } else if (elem.mozRequestFullScreen) { // Firefox
        elem.mozRequestFullScreen();
    } else if (elem.msRequestFullscreen) { // IE/Edge
        elem.msRequestFullscreen();
    }
}

        function startGame() {
            requestFullscreen();
            gameActive = true;
            score = 0; lives = 3; level = 1; gameSpeed = 3000;
            
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            // Start background music
            backgroundMusic.play().catch(e => {
                console.log('Music failed, trying again...');
                setTimeout(() => backgroundMusic.play(), 500);
            });
            
            // Reset player position
            playerPosition = 50;
            player.style.left = '50%';
            
            updateDisplay();
            spawnItems();
        }
        
        function restartGame() {
            document.querySelectorAll('.falling-item').forEach(item => item.remove());
            clearInterval(spawnInterval);
            startGame();
        }
        
        function endGame() {
            gameActive = false;
            clearInterval(spawnInterval);
            backgroundMusic.pause();
            
            document.querySelectorAll('.falling-item').forEach(item => item.remove());
            document.getElementById('finalScore').textContent = score;
            gameOverScreen.style.display = 'flex';
            
            const finalMessage = document.getElementById('finalMessage');
            if (score >= 300) {
                finalMessage.innerHTML = `WOW! You caught <span style="color: #f39c12;">${score}</span> of my kisses! üíã<br>You're absolutely perfect, Drishti! üíñ‚ú®`;
            } else if (score >= 200) {
                finalMessage.innerHTML = `Amazing! You caught <span style="color: #4ecdc4;">${score}</span> kisses! üíï<br>You're incredible at catching my love! üòò`;
            } else if (score >= 100) {
                finalMessage.innerHTML = `Great job! You caught <span style="color: #ff6b6b;">${score}</span> kisses! ‚ù§Ô∏è<br>Each one was filled with love for you! üåπ`;
            } else {
                finalMessage.innerHTML = `You caught <span style="color: #ff6b6b;">${score}</span> of my kisses! üíã<br>Every one carries my love for you! üíñ`;
            }
        }
        
        function goBack() {
            backgroundMusic.pause();
            window.location.href = 'index.html';
        }
        
        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
            document.getElementById('level').textContent = level;
        }
        
        function createCatchEffect() {
            const effect = document.createElement('div');
            effect.className = 'catch-effect';
            player.appendChild(effect);
            setTimeout(() => effect.remove(), 500);
        }
        
        function createParticleExplosion(x, y, color, emoji) {
            for (let i = 0; i < 6; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = emoji === '‚õàÔ∏è' ? 'üí•' : '‚ú®';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.color = color;
                particle.style.setProperty('--dx', (Math.random() - 0.5) * 150 + 'px');
                particle.style.setProperty('--dy', (Math.random() - 0.5) * 150 + 'px');
                gameContainer.appendChild(particle);
                setTimeout(() => particle.remove(), 800);
            }
        }
        
        function selectRandomItem() {
            const random = Math.random();
            let cumulative = 0;
            for (const item of gameItems) {
                cumulative += item.probability;
                if (random <= cumulative) return item;
            }
            return gameItems[0];
        }
        
        function spawnItems() {
            if (!gameActive) return;
            
            spawnInterval = setInterval(() => {
                if (!gameActive) return;
                
                const item = selectRandomItem();
                const fallingItem = document.createElement('div');
                fallingItem.className = `falling-item ${item.type}`;
                fallingItem.textContent = item.emoji;
                fallingItem.style.left = Math.random() * 85 + 7.5 + '%';
                fallingItem.style.animationDuration = (gameSpeed / 1000) + 's';
                
                fallingItem.addEventListener('click', (e) => {
                    e.preventDefault();
                    catchItem(fallingItem, item, e.clientX, e.clientY);
                });
                
                fallingItem.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    catchItem(fallingItem, item, touch.clientX, touch.clientY);
                });
                
                gameContainer.appendChild(fallingItem);
                
                setTimeout(() => {
                    if (fallingItem.parentNode) fallingItem.remove();
                }, gameSpeed + 100);
                
                const checkCollision = setInterval(() => {
                    if (!fallingItem.parentNode || !gameActive) {
                        clearInterval(checkCollision);
                        return;
                    }
                    
                    const itemRect = fallingItem.getBoundingClientRect();
                    const playerRect = player.getBoundingClientRect();
                    
                    if (itemRect.bottom >= playerRect.top &&
                        itemRect.left < playerRect.right &&
                        itemRect.right > playerRect.left &&
                        itemRect.top < playerRect.bottom) {
                        catchItem(fallingItem, item, itemRect.left + itemRect.width/2, itemRect.top + itemRect.height/2);
                        clearInterval(checkCollision);
                    }
                }, 50);
                
            }, Math.max(400, gameSpeed - (level * 200)));
            
            setTimeout(() => {
                if (gameActive) {
                    level++;
                    gameSpeed = Math.max(1200, gameSpeed - 300);
                    updateDisplay();
                    clearInterval(spawnInterval);
                    spawnItems();
                }
            }, 15000);
        }
        
        function catchItem(element, item, x, y) {
            if (!gameActive || !element.parentNode) return;
            
            element.remove();
            playSound(item.sound);
            
            if (item.type === 'bomb') {
                lives--;
                createParticleExplosion(x, y, '#e74c3c', '‚õàÔ∏è');
                if (lives <= 0) {
                    endGame();
                    return;
                }
            } else {
                score += item.points;
                createCatchEffect();
                const colors = {
                    'kiss': '#ff6b6b',
                    'heart': '#e74c3c', 
                    'special': '#f39c12'
                };
                createParticleExplosion(x, y, colors[item.type] || '#4ecdc4', item.emoji);
            }
            updateDisplay();
        }
        
        // Prevent default touch behaviors
        document.addEventListener('touchstart', (e) => {
            if (e.target.closest('.game-container')) {
                e.preventDefault();
            }
        }, { passive: false });
        
        document.addEventListener('touchmove', (e) => {
            if (e.target.closest('.game-container')) {
                e.preventDefault();
            }
        }, { passive: false });
        
        window.addEventListener('load', () => {
            startScreen.style.display = 'flex';
        });
    </script>
</body>
</html>

